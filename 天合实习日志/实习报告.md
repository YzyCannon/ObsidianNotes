|   |   |   |   |   |   |
|---|---|---|---|---|---|
|**姓名**|姚正元|**性别**|男|**学号**|3200907216|
|**分院**|计算机科学与数学学院|**专业**|软件工程|**班级**|软件工程2001|
|**实习**<br><br>**单位**|福建星网天合智能科技有限公司|**实****习**<br><br>**岗位**|软件工程师|**实习**<br><br>**时间**|2023-08-21至2024-02-25|
|**实习单位主要负责人姓名**|   |陈丽坚|   |**联系方式**|0591-28053888-8273|
|**实习单位指导教师姓名**|   |吴振文|   |**联系方式**|18059137121|
|**实习单位地址**|   |福建省-福州市-闽侯县星网锐捷科技园|   |**企业邮箱**|chenlijian@star-net.cn|
|**实习单位简介：** <br><br>福建星网天合智能科技有限公司成立于2012年1月18日，是福建星网锐捷通讯股份有限公司（股票代码：002396）的控股子公司，已发展成为国内知名的智慧空间解决方案提供商，并被认定为国家级高新技术企业。主营业务为智慧家庭、智慧社区、智慧办公、智慧校园产品及解决方案的研发、设计和销售。自成立以来，星网天合一直深入行业、围绕场景进行解决方案设计和创新，助力建筑空间实现智能化，推动行业数字化转型升级。|   |   |   |   |   |
|**实习内容及时间安排：**（内容较多时可增加页面。标题4号，宋体，左起顶格。内容小4号，宋体。）<br><br>一、主要任务与目标：<br><br>在公司自研智能家居智慧面板EdgePad上，12寸屏幕比例1920：515，RK3566处理器,系统openHarmony 3.2 release。以及润和DAYU200，RK3568处理器，屏幕比例16：9，系openHarmony 3.2 release。进行鸿蒙北向开发，实现直观美观的界面UI，提供用户友好的交互体验，确保用户可以轻松地操作和控制智能家居设备。通过无线局域网（WIFI）和以太网的方式，使用UDP协议搜索中控和接收中控主动上报的数据，使用TCP协议进行中控的登录认证，并通过HTTP协议发送指令，这种结合使用的方式既能确保通信的可靠性，又能满足数据传输的需求，从而实现智慧屏和智能家居设备之间的联动。<br><br>二、主要内容与基本要求：<br><br>l 使用ArkTS语言设计和开发直观美观的界面UI，以提供用户友好的交互体验，包括图形化控制界面和状态反馈。<br><br>l 通过UDP协议搜索中控并接收中控主动上报的数据，以获取设备状态和实现实时联动。<br><br>l 使用TCP协议进行中控的登录认证，保障通信安全和数据准确性。通过HTTP协议发送指令，确保通信的可靠性和满足数据传输的需求，实现智慧屏和智能家居设备之间的联动。<br><br>l 优化系统稳定性、性能和用户体验，确保产品的高可靠性和稳定性。<br><br>l 实现多设备多中控的功能，确保智慧面板可以同时连接和控制多个智能家居设备。<br><br>l 完成普通灯模块UI界面和开关控制指令下发，当设备状态变化主动上报时，获取到数据同时UI进行相应变化<br><br>l 完成空调模块UI界面和温度调节、模式切换、开关控制的指令下发。当设备状态变化主动上报时，获取到数据同时UI进行相应变化<br><br>l 完成窗帘模块UI界面和对窗帘点击的开关、暂停控制指令下发。<br><br>l 完成空气制冷检测UI界面，当设备状态变化主动上报时，获取到数据同时UI进行相应变化。<br><br>l 完成智能插座UI界面和开关控制指令下发，当设备状态变化主动上报时，获取到数据同时UI进行相应变化。<br><br>l 完成智能调光面板UI界面和对灯进行亮度调节、色温调节的指令下发，当设备状态变化主动上报时，获取到数据同时UI进行相应变化。<br><br>l 通过Native API在在鸿蒙应用中使用已经存在的C/C++库，完成使用RTSP协议网络播放<br><br>l 适配显示屏比例为16：9的开发板润和RK3568，确保主要内容直观美观，交互体验友好<br><br>三、计划进度：|   |   |   |   |   |
|**实习情况汇报：**<br><br>(请按实习时间或实习内容顺序进行陈述。要求2000字（包括图表）以上，小4号宋体，行距18～22磅)<br><br>第1周：在本周，我将会学习如何在应用Obsidian上使用Markdown语法编写笔记。此外，我还需要了解并安装鸿蒙北向开发用的IDE。为了遵守公司规则，我将卸载电脑上原有的盗版软件，换成可替代的正版软件。同时，我将熟悉员工手册，并遵守公司规范。<br><br>第2周：在本周，我学习了鸿蒙生态的应用开发语言ArkTS。了解Stage模型，API 9开始新增的模型，是目前主推且会长期演进的模型。我通过查阅官方文档和教程是理解复杂问题的重要途径。许多开发语言和框架都有详细的官方文档，其中包含了API参考、示例代码、使用说明等。<br><br>第3周：在本周，我通过编写小型程序，简单实现用户登陆、权限管理、部门管理、人员管理等功能。运行在鸿蒙官方IDE自带的手机模拟器，解决具体问题和参与开源项目来应用所学知识，熟悉新的框架、API和开发工具，了解自定义组件生命周期，了解各种声明式注解。<br><br>当我在程序中遇到的问题，通过参考社区和论坛中的解决方案，查阅官方文档和教程，寻找与我的开发环境相关的资源，或者自行定位和调试，通过仔细阅读错误信息、日志输出和调试工具的输出，定位问题所在。<br><br>第4周：在本周，我熟悉了 UIAbility组件生命周期，熟悉数据库迁移概念，解决数据库更新问题，增量更新是一种通过更新包含了变更的部分，而不是整个应用程序的方式来进行应用程序更新的方法。熟悉UI 设计的各种布局方式。根据上级的指导，了解代码规范。<br><br>学习Git和GitLab，使用公司提供的gitlab账号，将主账号的代码库fork到我的账号下，创建一个独立的分支。在这个分支进行开发。<br><br>第5周：在本周，我阅读了实际项目源码，理解源码框架结构、业务逻辑。了解基本项目工程目录，根据上级安排：<br><br>（1） 完成普通灯模块UI界面和开关控制指令下发，当设备状态变化主动上报时，获取到数据同时UI进行相应变化完成窗帘模块UI界面和对窗帘点击的开关、暂停控制指令下发。<br><br>（2） 完成智能插座UI界面和开关控制指令下发，当设备状态变化主动上报时，获取到数据同时UI进行相应变化。<br><br>（3） 完成智能调光面板UI界面和对灯进行亮度调节、色温调节的指令下发，当设备状态变化主动上报时，获取到数据同时UI进行相应变化。<br><br>其中调光灯的UI没有现成合适的组件可以使用，因此自行构造一个，创建矩形拖动条组件，处理用户的拖动事件：在矩形拖动条组件的onTouchEvent方法中，可以根据用户的手势事件（如ACTION_DOWN、ACTION_MOVE、ACTION_UP等）来判断用户是否正在拖动圆形按钮。如果是，根据手指的坐标更新按钮的位置，并重新绘制组件。最后发送拖动条更新事件。<br><br>第6周：在本周，我实现移动端不同分辨力尺寸上的屏幕进行适配。<br><br>在开发中，我依次完成以下步骤：媒体查询（Media Queries）：利用ArkTS的媒体查询API，根据不同的屏幕尺寸、设备类型等条件，为不同的设备应用不同的样式和布局规则。图片适配：针对不同屏幕分辨率和像素密度，使用鸿蒙系统提供的图片资源适配机制，根据设备的需要加载合适的图片资源。字体适配：鸿蒙系统提供了字体大小自适应功能，可以根据设备的屏幕尺寸和用户设置的字体大小，自动调整应用中的文本大小。最后，我会测试和验证，确保应用在各种终端上正常运行并具有良好的用户体验。使用鸿蒙IDE提供的模拟器或真实设备进行测试，同时注意观察应用在不同设备上的布局、字体、图标和交互等方面是否符合预期。<br><br>第7周：发现动画有缺陷进行修复。在List父组件中，使用animateTo显式动画接口，对<br><br>ListItem进行宽度变化的动画效果时候，其他ListItem在动画过程中会产生重影，对动画不太美观。通过查阅社区，并没有发现有人反应过相关的问题，自己排查以为问题出现在animateTo显式动画接口上，后来又想对要展开的ListItem宽度进行遍历减小但是效果比较卡顿，最后通过将原有的List父组件去掉，改成普通的Row组件当父，再加上手指滑动组件解决。<br><br>第8周：熟悉open Harmony以太网管理模块接口，实现设备的以太网连接功能。鸿蒙应用的APL（Ability Privilege Level）等级，分为normal、system_basic和system_core三个等级。SDK分类为public-SDK：不包含系统应用所需要的高权限API和full-SDK：包含了系统应用所需要的高权限API。使用以太网管理模块接口需要使用full-SDK，并且提高权限至system_basic。<br><br>第9周：实现RTSP协议网络播放H.264视频流，在实现 RTSP 协议网络播放 H.264 视频流的过程中，需要涉及到网络编程、RTP/RTCP 协议、H.264 编解码等技术，先了解相关的基础知识，再进行具体的开发实现。<br><br>集成现有的C/C++库：想在鸿蒙应用中使用已经存在的C/C++库，例如图像处理库、音频处理库或其他第三方库，可以使用NAPI来将这些库与鸿蒙应用集成起来。编译Android的ijkplayer，编译后Harmony需要的是arm64的的.os。通过IDE开发一个`RAM`包的NAPI工程（集成C ++的动态库到开发板的RAM中），直接编译安装hap包到开发板即可。<br><br>第10周：在本周，我将会继续完成剩余的智能家居设备的应用层的实现。例如，我会完成空调模块UI界面和温度调节、模式切换、开关控制的指令下发。当设备状态变化主动上报时，获取到数据同时UI进行相应变化。我还会完成空气制冷检测UI界面，当设备状态变化主动上报时，获取到数据同时UI进行相应变化。<br><br>空调模块UI，没有现成的环形拖动条组件，通过自行构造，绘制环形背景，绘制可拖动的圆形按钮，处理用户的触摸事件：在Ability Slice中的onTouchEvent方法中处理用户的触摸事件。根据触摸事件的类型（如ACTION_DOWN、ACTION_MOVE、ACTION_UP等），判断用户是否正在拖动圆形按钮。如果是，根据手指的坐标计算出拖动的角度，并更新按钮的位置。发送拖动条更新事件。<br><br>除此之外，我开始学习了open Harmony南向开发。我会通过wsl +Ubuntu20.04搭建开发环境，并使用Docker镜像安装依赖，下载全量代码，进入Docker构建环境完成openharmony3.2 release的全量编译。最后，我会阅读官方编译构建配置规则文档，并开始实现封装第三方代码实现声音降噪的NAPI提供给应用层调用。<br><br>\|   \|<br>\|---\|<br>\|<br>\|![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml14116\wps1.png)\|<br><br> <br><br>\|   \|<br>\|---\|<br>\|<br>\|![](file:///C:\Users\ADMINI~1\AppData\Local\Temp\ksohtml14116\wps2.png)\||   |   |   |   |   |
||   |   |   |   |   |