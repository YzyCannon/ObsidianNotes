# 管理组件拥有的状态
## @State装饰器：组件内状态
- •
    `@State装饰的变量，或称为状态变量，一旦变量拥有了状态属性，就和自定义组件的渲染绑定起来。当状态改变时，UI会发生对应的渲染改变。`
## @Prop装饰器：父子单向同步
- •  
    `单向同步：对父组件状态变量值的修改，将同步给子组件@Prop装饰的变量，子组件@Prop变量的修改不会同步到父组件的状态变量上`
## @Link装饰器：父子双向同步

## @Provide装饰器和@Consume装饰器：与后代组件双向同步
- •
    `@Provide和@Consume摆脱参数传递机制的束缚，实现跨层级传递`
## @Observed装饰器和@ObjectLink装饰器：嵌套类对象属性变化
- •
    上文所述的装饰器仅能观察到第一层的变化，但是在实际应用开发中，应用会根据开发需要，封装自己的数据模型。对于多层嵌套的情况，比如二维数组，或者数组项class，或者class的属性是class，他们的第二层的属性变化是无法观察到的。
@ObjectLink装饰的变量不能被赋值，如果要使用赋值操作，请使用[@Prop](https://developer.harmonyos.com/cn/docs/documentation/doc-guides-V3/arkts-prop-0000001473537702-V3)。
- •
    @Prop装饰的变量和数据源的关系是是单向同步，@Prop装饰的变量在本地拷贝了数据源，所以它允许本地更改，如果父组件中的数据源有更新，@Prop装饰的变量本地的修改将被覆盖；
- •
    @ObjectLink装饰的变量和数据源的关系是双向同步，@ObjectLink装饰的变量相当于指向数据源的指针。如果一旦发生@ObjectLink装饰的变量的赋值，则同步链将被打断。

# 数据管理
### 通过用户首选项实现数据持久化
#### 场景介绍
用户首选项为应用提供Key-Value键值型的数据处理能力，支持应用持久化轻量级数据，并对其修改和查询。当用户希望有一个*全局唯一存储*的地方，可以采用用户首选项来进行存储。Preferences会将该数据缓存在内存中，当用户读取的时候，能够快速从内存中获取数据。Preferences会随着存放的数据量越多而导致应用占用的内存越大，因此，Preferences不适合存放过多的数据，适用的场景一般为应用保存用户的个性化设置（字体大小，是否开启夜间模式）等。
#### 运作机制
![0000000000011111111.20230609143740.95540681772275969328775816060773:50001231000000:2800:759E2D6C736977ECCC86472A726C30BF11E8CFE5CF0451A084356EF1C21D37F1.jpg](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20230609143740.95540681772275969328775816060773:50001231000000:2800:759E2D6C736977ECCC86472A726C30BF11E8CFE5CF0451A084356EF1C21D37F1.jpg?needInitFileName=true?needInitFileName=true?needInitFileName=true "0000000000011111111.20230609143740.95540681772275969328775816060773:50001231000000:2800:759E2D6C736977ECCC86472A726C30BF11E8CFE5CF0451A084356EF1C21D37F1.jpg")
如图所示，用户程序通过JS接口调用用户首选项读写对应的数据文件。开发者可以将用户首选项持久化文件的内容加载到Preferences实例，每个文件唯一对应到一个Preferences实例，系统会通过静态容器将该实例存储在内存中，直到主动从内存中移除该实例或者删除该文件。
- Key键为string类型，要求非空且长度不超过80个字节。
- 如果Value值为string类型，可以为空，不为空时长度不超过8192个字节。 
- 内存会随着存储数据量的增大而增大，所以存储的数据量应该是轻量级的，建议存储的数据不超过一万条，否则会在内存方面产生较大的开销。
### 通过关系型数据库实现数据持久化
#### 场景介绍

关系型数据库基于SQLite组件，适用于存储包含*复杂关系数据的场景*，比如一个班级的学生信息，需要包括姓名、学号、各科成绩等，又或者公司的雇员信息，需要包括姓名、工号、职位等，由于数据之间有较强的对应关系，复杂程度比键值型数据更高，此时需要使用关系型数据库来持久化保存数据。

#### 运作机制

关系型数据库对应用提供通用的操作接口，底层使用SQLite作为持久化存储引擎，支持SQLite具有的数据库特性，包括但不限于事务、索引、视图、触发器、外键、参数化查询和预编译SQL语句。

![0000000000011111111.20230609143740.75192447241486645214184146509127:50001231000000:2800:6A164B0CCBE2151C595FE6CF6F58398D148DF1BFF2EDFF8422373D8A56E69AC1.jpg](https://alliance-communityfile-drcn.dbankcdn.com/FileServer/getFile/cmtyPub/011/111/111/0000000000011111111.20230609143740.75192447241486645214184146509127:50001231000000:2800:6A164B0CCBE2151C595FE6CF6F58398D148DF1BFF2EDFF8422373D8A56E69AC1.jpg?needInitFileName=true?needInitFileName=true?needInitFileName=true "0000000000011111111.20230609143740.75192447241486645214184146509127:50001231000000:2800:6A164B0CCBE2151C595FE6CF6F58398D148DF1BFF2EDFF8422373D8A56E69AC1.jpg")

#### 约束限制
-   系统默认日志方式是WAL（Write Ahead Log）模式，系统默认落盘方式是FULL模式。 
-    数据库中连接池的最大数量是4个，用以管理用户的读操作。
-  为保证数据的准确性，数据库同一时间只能支持一个写操作。
-  当应用被卸载完成后，设备上的相关数据库文件及临时文件会被自动清除。
### 通过键值型数据库实现数据持久化

#### 场景介绍

键值型数据库存储键值对形式的数据，当需要存储的数据*没有复杂的关系模型*，比如存储商品名称及对应价格、员工工号及今日是否已出勤等，由于数据复杂度低，更容易兼容不同数据库版本和设备类型，因此推荐使用键值型数据库持久化此类数据。
#### 约束限制
-  设备协同数据库，针对每条记录，Key的长度≤896 Byte，Value的长度<4 MB。
-  单版本数据库，针对每条记录，Key的长度≤1 KB，Value的长度<4 MB。 
-  每个应用程序最多支持同时打开16个分布式数据库。
-  键值型数据库事件回调方法中不允许进行阻塞操作，例如修改UI组件。
# 项目结构
model：封装了一写方法类
pages：应用主页面
view：UI组件（例如 弹窗、日历）
viewmodel：UI界面的一些方法（例如初始化数据、获取打开信息）

# 数据库设计
- 如果您需要存储结构化数据，并且需要进行复杂的查询和数据操作，那么关系型数据库可能是一个更好的选择。关系型数据库使用表格结构来组织数据，并使用SQL（结构化查询语言）进行数据操作。它们适用于许多传统的应用程序和数据管理需求。
- 如果您的应用程序需要在移动设备、物联网设备和其他设备之间共享数据，并具有较高的实时性要求，那么使用 HarmonyOS 的首选项存储可能更合适。HarmonyOS 提供了分布式数据管理和共享功能，使不同设备之间的数据同步更加方便。它适用于具有分布式和协作需求的场景，例如智能家居、智能办公和物联网应用。

因此，您的选择取决于您的具体需求。如果您需要处理复杂的查询和数据操作，关系型数据库可能更适合您。如果您的重点是实现分布式数据管理和共享，以及在多设备间同步数据，那么 HarmonyOS 的首选项存储可能更适合您的项目。